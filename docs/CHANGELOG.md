# 更新紀錄

## 2025-11-23（v1.4.x）

### 核心體驗優化 (Game Feel & Polish)

#### 1. 死亡與結束畫面 (Game Over Polish)
- **延遲結束 (Delayed Game Over)**：
  - 玩家死亡後不再立即跳出結束視窗，而是進入約 1 秒的「死亡動畫」階段。
  - 遊戲邏輯暫停，但特效繼續播放，讓死亡瞬間更具戲劇張力。
- **崩解特效 (Disintegration Effect)**：
  - 玩家死亡時，隊長（蛇頭）不再消失，而是變紅並崩解成像素方塊。
  - 移除了血腥的紅色爆炸，改為更有科技感的像素飛散效果。
  - 修正了死亡特效位置偏移的 Bug。
- **死因分析 (Death Reasons)**：
  - Game Over 畫面現在會顯示具體的死因（撞牆、自噬、被怪打死、撞石頭）。
  - 每個死因都配有多句隨機的趣味吐槽（幹話）。

#### 2. 遊戲節奏與難度 (Pacing & Difficulty)
- **速度調整**：
  - **玩家速度**：基礎移動間隔從 180ms 增加至 230ms（變慢約 20%），讓操作更從容。
  - **怪物速度**：基礎速度係數從 1.2 降低至 1.0，保持與玩家速度的相對平衡。
- **無敵機制重構**：
  - **隊伍級無敵**：騎士受傷觸發無敵後，全隊（包括隊長和其他隊員）都會免疫所有傷害。徹底解決了「被群怪圍毆瞬間秒殺」的問題。
  - **碰撞冷卻**：怪物攻擊冷卻時間從 300ms 提升至 500ms。
- **升級數值調整**：
  - **隊長撞擊**：傷害升級增量從 +5 提升至 +10。
  - **隊長血量**：升級增量從 +5 提升至 +10。
  - **法師光環**：傷害升級增量從 +3 提升至 +5，最大等級提升至 8。

#### 3. 新增機制與障礙物 (New Mechanics)
- **石頭障礙物 (Obstacles)**：
  - 玩家每升一級，地圖上隨機生成 3 個石頭。
  - **生成保護期**：石頭剛生成的前 2 秒為半透明虛影狀態，無碰撞體積，避免玩家「冤死」。
  - **視覺提示**：石頭有紅色描邊，生成時有灰色閃光特效。
  - **阻擋規則**：石頭會阻擋玩家移動（撞到死）、阻擋怪物移動（會被彈開）、阻擋弓箭（會消失）。
- **隊員招募獎勵**：
  - 騎士死亡獎勵改為「騎士死亡時招募 X 名勇者」，描述更直觀。

#### 4. 視覺與 UI 優化 (Visual & UI)
- **特效系統增強**：
  - **隊員死亡**：新增血霧擴散特效。
  - **特效防護**：修復了特效半徑計算可能為負數導致遊戲崩潰的 Bug。
- **UI 細節**：
  - 上傳分數按鈕增加 `cursor: pointer`。
  - 升級選項描述優化，自動顯示數值變化（如 `+2 (+2)`）。
  - 版本號顯示在主選單。

---

## 2025-11-23（v1.3.x）

### 核心玩法變更：合成與進化
- **全域合成**：同職業同等級勇者數量滿足條件（3->1, 4->1, 5->1）時自動合成升級。
- **數值成長**：
  - 弓箭手：傷害線性成長 (+5)。
  - 法師：傷害倍數成長 (*2)。
  - 騎士：血量特殊成長。
- **騎士機制重做**：移除「承受次數」升級，改為「聖光充能」（殺怪回血）。

### 手機版適配
- **視野自動拉遠**：手機版自動縮小畫面（0.75x），擴大視野。
- **觸控優化**：改進滑動偵測，支援連續滑動轉向。

---
