# 怪物生成配置說明

## 📝 檔案位置

怪物等級與出現機率的配置都存放在 **`enemy-spawn-config.js`** 檔案中，企劃人員可以直接修改此檔案來調整怪物出現的機率。

## 🎯 配置結構

### 基本概念

怪物生成系統根據**玩家等級**來決定會出現哪些等級的怪物，以及它們的出現機率。

- **一開始**：只出現等級 1 的怪物（最弱）
- **隨著玩家等級提升**：逐漸出現更強的怪物
- **每個玩家等級階段**：定義該階段可出現的怪物等級及其出現機率（權重）

### 配置格式

```javascript
spawnByPlayerLevel: [
  {
    // 玩家等級範圍
    playerLevelRange: [1, 2],
    // 該階段可出現的怪物等級及其權重
    enemyLevels: [
      { level: 1, weight: 100 },  // 100% 機率出現等級 1
    ],
  },
  // ... 更多階段
]
```

### 參數說明

- **`playerLevelRange`**：玩家等級範圍 `[最小等級, 最大等級]`
  - 例如：`[1, 2]` 表示玩家等級 1 到 2 時使用此配置
  - 例如：`[21, 999]` 表示玩家等級 21 以上時使用此配置

- **`enemyLevels`**：該階段可出現的怪物等級陣列
  - **`level`**：怪物等級（1-10）
  - **`weight`**：出現權重（數值越大，出現機率越高）
    - 機率計算：`該等級權重 / 所有等級權重總和`
    - 例如：`[{level: 1, weight: 80}, {level: 2, weight: 20}]`
      - 等級 1 出現機率：80 / (80 + 20) = 80%
      - 等級 2 出現機率：20 / (80 + 20) = 20%

## 📊 預設配置說明

### 玩家等級 1-2
- 只出現等級 1 的怪物（100%）

### 玩家等級 3-4
- 等級 1：80%
- 等級 2：20%

### 玩家等級 5-6
- 等級 1：50%
- 等級 2：35%
- 等級 3：15%

### 玩家等級 7-8
- 等級 2：40%
- 等級 3：40%
- 等級 4：20%

### 玩家等級 9-10
- 等級 3：35%
- 等級 4：35%
- 等級 5：30%

### 玩家等級 11-15
- 等級 4：30%
- 等級 5：30%
- 等級 6：25%
- 等級 7：15%

### 玩家等級 16-20
- 等級 6：30%
- 等級 7：35%
- 等級 8：35%

### 玩家等級 21+
- 等級 7：25%
- 等級 8：30%
- 等級 9：30%
- 等級 10：15%

## 🔧 調整建議

### 增加難度
- 提高高等級怪物的權重
- 降低低等級怪物的權重
- 在較早的玩家等級階段就加入高等級怪物

**範例**：讓玩家等級 5-6 時就出現等級 4 的怪物
```javascript
{
  playerLevelRange: [5, 6],
  enemyLevels: [
    { level: 1, weight: 30 },
    { level: 2, weight: 30 },
    { level: 3, weight: 25 },
    { level: 4, weight: 15 },  // 新增等級 4
  ],
}
```

### 降低難度
- 提高低等級怪物的權重
- 降低高等級怪物的權重
- 延後高等級怪物的出現時機

**範例**：讓玩家等級 7-8 時主要還是出現等級 2-3
```javascript
{
  playerLevelRange: [7, 8],
  enemyLevels: [
    { level: 2, weight: 50 },  // 提高權重
    { level: 3, weight: 40 },
    { level: 4, weight: 10 },  // 降低權重
  ],
}
```

### 調整出現機率
- 修改 `weight` 數值來調整各等級的出現機率
- 權重是相對的，不需要總和為 100
- 系統會自動計算百分比

**範例**：讓等級 5 和等級 6 出現機率相同
```javascript
{
  playerLevelRange: [11, 15],
  enemyLevels: [
    { level: 4, weight: 20 },
    { level: 5, weight: 30 },  // 30% 機率
    { level: 6, weight: 30 },   // 30% 機率（與等級 5 相同）
    { level: 7, weight: 20 },
  ],
}
```

## ⚠️ 注意事項

1. **等級範圍不重疊**：確保 `playerLevelRange` 不會重疊
   - ✅ 正確：`[1, 2]`, `[3, 4]`, `[5, 6]`
   - ❌ 錯誤：`[1, 3]`, `[2, 4]`（重疊）

2. **覆蓋所有等級**：確保所有玩家等級都有對應的配置
   - 如果玩家等級超出所有配置範圍，會使用最後一個配置

3. **怪物等級限制**：怪物等級必須在 1-10 之間
   - 對應 `upgrade-config.js` 中的 `enemyLevel.maxLevel`

4. **權重數值**：權重可以是任意正數，不需要總和為 100
   - 系統會自動計算百分比

5. **重新整理**：修改後請重新整理瀏覽器頁面以看到更新

## 📋 完整範例

```javascript
window.ENEMY_SPAWN_CONFIG = {
  spawnByPlayerLevel: [
    {
      playerLevelRange: [1, 2],
      enemyLevels: [
        { level: 1, weight: 100 },
      ],
    },
    {
      playerLevelRange: [3, 4],
      enemyLevels: [
        { level: 1, weight: 80 },
        { level: 2, weight: 20 },
      ],
    },
    // ... 更多階段
  ],
};
```

## 🎮 遊戲體驗設計建議

### 前期（等級 1-5）
- 主要出現低等級怪物（1-2級）
- 讓玩家熟悉遊戲機制
- 逐漸引入中等難度

### 中期（等級 6-15）
- 怪物等級逐漸提升
- 混合不同等級的怪物
- 增加挑戰性

### 後期（等級 16+）
- 主要出現高等級怪物（7-10級）
- 保持高難度挑戰
- 偶爾出現低等級怪物作為「福利」

